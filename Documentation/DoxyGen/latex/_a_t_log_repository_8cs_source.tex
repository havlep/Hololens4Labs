\doxysection{ATLog\+Repository.\+cs}
\hypertarget{_a_t_log_repository_8cs_source}{}\label{_a_t_log_repository_8cs_source}\index{Repositories/AzureTableRepository/ATLogRepository.cs@{Repositories/AzureTableRepository/ATLogRepository.cs}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00001}00001\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespace_holo_lens4_labs_1_1_scripts_1_1_d_t_os}{HoloLens4Labs.Scripts.DTOs}};}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00002}00002\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespace_holo_lens4_labs_1_1_scripts_1_1_mappers}{HoloLens4Labs.Scripts.Mappers}};}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00003}00003\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespace_holo_lens4_labs_1_1_scripts_1_1_model_1_1_logs}{HoloLens4Labs.Scripts.Model.Logs}};}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00004}00004\ \textcolor{keyword}{using\ }Microsoft.WindowsAzure.Storage.Table;}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00005}00005\ \textcolor{keyword}{using\ }System;}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00006}00006\ \textcolor{keyword}{using\ }System.Collections.Generic;}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00007}00007\ }
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00008}00008\ \textcolor{keyword}{using\ }System.Linq;}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00009}00009\ \textcolor{keyword}{using\ }System.Threading.Tasks;}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00010}00010\ \textcolor{keyword}{using\ }UnityEngine;}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00011}00011\ }
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00012}00012\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_holo_lens4_labs_1_1_scripts_1_1_repositories_1_1_azure_tables}{HoloLens4Labs.Scripts.Repositories.AzureTables}}}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00013}00013\ \{}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00014}\mbox{\hyperlink{class_holo_lens4_labs_1_1_scripts_1_1_repositories_1_1_azure_tables_1_1_a_t_log_repository}{00014}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_holo_lens4_labs_1_1_scripts_1_1_repositories_1_1_azure_tables_1_1_a_t_log_repository}{ATLogRepository}}\ :\ \mbox{\hyperlink{class_holo_lens4_labs_1_1_scripts_1_1_repositories_1_1_azure_tables_1_1_azure_table_object_repository}{AzureTableObjectRepository}}<Log,\ LogDTO>}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00015}00015\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00019}\mbox{\hyperlink{class_holo_lens4_labs_1_1_scripts_1_1_repositories_1_1_azure_tables_1_1_a_t_log_repository_acd21fadd03746df7cc91e4f543b1a111}{00019}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_holo_lens4_labs_1_1_scripts_1_1_repositories_1_1_azure_tables_1_1_a_t_log_repository_acd21fadd03746df7cc91e4f543b1a111}{ATLogRepository}}(CloudTable\ \mbox{\hyperlink{class_holo_lens4_labs_1_1_scripts_1_1_repositories_1_1_azure_tables_1_1_azure_table_object_repository_a061d28ed81c44c11ffed5f06902c0f9a}{table}},\ \textcolor{keywordtype}{string}\ partitionKey)\ :\ base(new\ \mbox{\hyperlink{class_holo_lens4_labs_1_1_scripts_1_1_mappers_1_1_log_mapper}{LogMapper}}(),\ \mbox{\hyperlink{class_holo_lens4_labs_1_1_scripts_1_1_repositories_1_1_azure_tables_1_1_azure_table_object_repository_a061d28ed81c44c11ffed5f06902c0f9a}{table}},\ partitionKey)\ \{\ \}}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00020}00020\ }
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00029}\mbox{\hyperlink{class_holo_lens4_labs_1_1_scripts_1_1_repositories_1_1_azure_tables_1_1_a_t_log_repository_a3c8cc365f325d490c23094721bd93402}{00029}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ async\ Task<(\mbox{\hyperlink{class_holo_lens4_labs_1_1_scripts_1_1_model_1_1_logs_1_1_log}{Log}}[],\ TableContinuationToken)>\ \mbox{\hyperlink{class_holo_lens4_labs_1_1_scripts_1_1_repositories_1_1_azure_tables_1_1_a_t_log_repository_a3c8cc365f325d490c23094721bd93402}{GetLogsForExperiment}}(\textcolor{keywordtype}{string}\ experimentID,\ \textcolor{keywordtype}{int}\ pageSize,\ TableContinuationToken\ continuationToken\ =\ \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00030}00030\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00032}00032\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_holo_lens4_labs_1_1_scripts_1_1_repositories_1_1_azure_tables_1_1_azure_table_object_repository_a061d28ed81c44c11ffed5f06902c0f9a}{table}}\ ==\ \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00033}00033\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \textcolor{keyword}{new}\ NotSupportedException(\textcolor{stringliteral}{"{}Table\ was\ not\ initialized\ for\ this\ type"{}});}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00034}00034\ }
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00035}00035\ \ \ \ \ \ \ \ \ \ \ \ \ var\ query\ =\ \textcolor{keyword}{new}\ TableQuery<LogDTO>()}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00036}00036\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .Where(TableQuery.GenerateFilterCondition(\textcolor{stringliteral}{"{}PartitionKey"{}},\ QueryComparisons.Equal,\ experimentID))}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00037}00037\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .Take(pageSize);}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00038}00038\ }
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00039}00039\ \ \ \ \ \ \ \ \ \ \ \ \ var\ segment\ =\ await\ this.\mbox{\hyperlink{class_holo_lens4_labs_1_1_scripts_1_1_repositories_1_1_azure_tables_1_1_azure_table_object_repository_a061d28ed81c44c11ffed5f06902c0f9a}{table}}.ExecuteQuerySegmentedAsync(query,\ continuationToken);}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00040}00040\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00041}00041\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Map\ the\ result\ to\ the\ Log\ type\ skipping\ over\ any\ problematic\ entries}}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00042}00042\ \ \ \ \ \ \ \ \ \ \ \ \ var\ logs\ =\ segment.Results.Aggregate(\ \textcolor{keyword}{new}\ List<Log>(),\ (acc,\ dto)\ =>\ \{}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00043}00043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00044}00044\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00045}00045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ acc.Add(\mbox{\hyperlink{class_holo_lens4_labs_1_1_scripts_1_1_repositories_1_1_azure_tables_1_1_azure_table_object_repository_a2a72bd0fe2267cee7c333cedddb7d539}{mapper}}.\mbox{\hyperlink{interface_holo_lens4_labs_1_1_scripts_1_1_mappers_1_1_mapper_interface_a843b411db0d68ca67127f737bf204431}{ToOBJ}}(dto));}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00046}00046\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (Exception\ e)}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00047}00047\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00048}00048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Debug.Log(e.Message);}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00049}00049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00050}00050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ acc;}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00051}00051\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00052}00052\ }
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00053}00053\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (logs.ToArray(),\ segment.ContinuationToken);}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00054}00054\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00055}00055\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00056}00056\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00057}00057\ }
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00058}00058\ }
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00059}00059\ }
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00060}00060\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_a_t_log_repository_8cs_source_l00061}00061\ \}}

\end{DoxyCode}
